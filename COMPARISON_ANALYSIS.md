# Godot Pet é¡¹ç›®æ–°æ—§ç‰ˆæœ¬å¯¹æ¯”åˆ†æžæŠ¥å‘Š

## æ¦‚è¿°

æœ¬æ–‡æ¡£å¯¹æ¯”åˆ†æžäº† `GAME/godot-pet` (æ–°ç‰ˆæœ¬) å’Œ `GAME/godot-pet-origin/godot_pet` (æ—§ç‰ˆæœ¬) çš„ä¸»è¦å·®å¼‚ï¼Œé‡ç‚¹å…³æ³¨åŠ¨ä½œå’ŒåŠ¨ç”»ç³»ç»Ÿç›¸å…³çš„æ”¹åŠ¨ï¼Œå¹¶è¯†åˆ«æ½œåœ¨çš„bugã€‚

## ä¸»è¦å·®å¼‚æ€»ç»“

### 1. é¡¹ç›®æž¶æž„å’Œä»£ç ç»“æž„

#### æ–°ç‰ˆæœ¬ç‰¹ç‚¹
- **æ¨¡å—åŒ–æž¶æž„é‡æž„**ï¼šå¼ºè°ƒ"100% è¿˜åŽŸåŽŸå§‹åŠ¨ç”»å¾ªçŽ¯ä¸Žç‰©ç†åŒæ­¥é€»è¾‘ï¼ŒåŒæ—¶ä¿æŒæ¨¡å—åŒ–æž¶æž„"
- **æˆ˜æœ¯è§£è€¦è®¾è®¡**ï¼šç‰©ç†æ¨¡å—é‡‡ç”¨æˆ˜æœ¯è§£è€¦è®¾è®¡ï¼Œä¸ä¾µå…¥æ ¸å¿ƒæŽ§åˆ¶å™¨é€»è¾‘
- **æ—¥å¿—åŽ»é‡æœºåˆ¶**ï¼šæ·»åŠ äº†æ—¥å¿—åŽ»é‡åŠŸèƒ½ï¼Œé¿å…é‡å¤æ—¥å¿—åˆ·å±
- **ç®€åŒ–æ³¨é‡Šé£Žæ ¼**ï¼šä½¿ç”¨ç®€æ´çš„æ³¨é‡Šæ ¼å¼å’Œä»£ç åˆ†ç»„

#### æ—§ç‰ˆæœ¬ç‰¹ç‚¹
- **å¤æ‚çš„çŠ¶æ€ç®¡ç†**ï¼šåŒ…å«æ›´å¤šé©¬å°”å¯å¤«æ€§ç›¸å…³çš„çŠ¶æ€ç®¡ç†é€»è¾‘
- **ä¸°å¯Œçš„ç¨‹åºåŒ–åŠ¨ç”»**ï¼šæ”¯æŒæ›´å¤šç±»åž‹çš„ç¨‹åºåŒ–åŠ¨ç”»ï¼ˆwave, spin, bounce, fly, roll, shake, flip, danceç­‰ï¼‰
- **ç›´æŽ¥çš„çŠ¶æ€å¤„ç†**ï¼šEQSæŸ¥è¯¢ç›´æŽ¥åœ¨æŽ§åˆ¶å™¨ä¸­å¤„ç†

### 2. åŠ¨ç”»ç³»ç»Ÿå·®å¼‚

#### é‡å¤§å˜æ›´ï¼šåŠ¨ç”»ç³»ç»Ÿå¤§å¹…ç®€åŒ–

**æ—§ç‰ˆæœ¬åŠ¨ç”»ç³»ç»Ÿç‰¹ç‚¹ï¼š**
```gdscript
# æ”¯æŒä¸°å¯Œçš„ç¨‹åºåŒ–åŠ¨ç”»
func is_procedural_anim(name: String) -> bool:
    return name in ["wave", "spin", "bounce", "fly", "roll", "shake", "flip", "dance"]

# å¤æ‚çš„BlendTreeå‚æ•°ç®¡ç†
func apply_blendtree_state(state: int) -> void:
    # åŒ…å«locomotion blend_positionç­‰å¤šç§å‚æ•°
```

**æ–°ç‰ˆæœ¬åŠ¨ç”»ç³»ç»Ÿç‰¹ç‚¹ï¼š**
```gdscript
# åªæ”¯æŒåŸºç¡€ç¨‹åºåŒ–åŠ¨ç”»
func is_procedural_anim(n: String) -> bool:
    return n in ["fly", "wave", "flip", "spin"]

# ç®€åŒ–çš„BlendTreeå‚æ•°ç®¡ç†
func apply_blendtree_state(state: int) -> void:
    # åªç®¡ç†jump_blend
```

#### âš ï¸ **æ½œåœ¨Bug 1ï¼šç¨‹åºåŒ–åŠ¨ç”»åŠŸèƒ½ç¼ºå¤±**

**é—®é¢˜æè¿°ï¼š**
æ–°ç‰ˆæœ¬ç§»é™¤äº†ä»¥ä¸‹ç¨‹åºåŒ–åŠ¨ç”»æ”¯æŒï¼š
- `spin` (æ—‹è½¬)
- `bounce` (å¼¹è·³)
- `roll` (ç¿»æ»š)
- `shake` (é¢¤æŠ–)
- `dance` (èˆžè¹ˆ)

**å½±å“ï¼š**
- æœåŠ¡ç«¯å‘é€è¿™äº›åŠ¨ç”»æŒ‡ä»¤æ—¶ï¼Œæ–°ç‰ˆæœ¬å®¢æˆ·ç«¯æ— æ³•æ­£ç¡®å“åº”
- å® ç‰©è¡Œä¸ºè¡¨çŽ°ä¸å¦‚æ—§ç‰ˆæœ¬ä¸°å¯Œ

**ä¿®å¤å»ºè®®ï¼š**
æ¢å¤å¯¹è¿™äº›ç¨‹åºåŒ–åŠ¨ç”»çš„æ”¯æŒï¼Œæˆ–ç¡®ä¿æœåŠ¡ç«¯ä¸ä¼šå‘é€ä¸æ”¯æŒçš„åŠ¨ç”»æŒ‡ä»¤ã€‚

#### âš ï¸ **æ½œåœ¨Bug 2ï¼šåŠ¨ç”»çŠ¶æ€åˆ‡æ¢é€»è¾‘ç®€åŒ–**

**é—®é¢˜æè¿°ï¼š**
æ–°ç‰ˆæœ¬çš„ `switch_anim` å‡½æ•°ç§»é™¤äº†å¯¹åŠ¨ç”»æ ‘æ¿€æ´»çŠ¶æ€çš„ç®¡ç†é€»è¾‘ï¼š

```gdscript
# æ–°ç‰ˆæœ¬ï¼šç¨‹åºåŒ–åŠ¨ç”»æ—¶ä¸ç®¡ç†åŠ¨ç”»æ ‘çŠ¶æ€
if is_procedural_anim(normalized_name):
    set_procedural_anim(normalized_name)
    proc_time = 0.0
    return
```

**æ—§ç‰ˆæœ¬çš„é€»è¾‘æ›´å¤æ‚ï¼š**
```gdscript
if is_procedural_anim(normalized_name):
    if animation_tree:
        animation_tree.set("parameters/locomotion/blend_position", 0.0)
        animation_tree.set("parameters/jump_blend/blend_amount", 0.0)
    apply_blendtree_state(PetData.AnimState.IDLE)
    current_anim_state = PetData.AnimState.IDLE
    set_procedural_anim(normalized_name)
    proc_time = 0.0
    return
```

**æ½œåœ¨å½±å“ï¼š**
- ç¨‹åºåŒ–åŠ¨ç”»åˆ‡æ¢æ—¶å¯èƒ½å‡ºçŽ°åŠ¨ç”»æ ‘çŠ¶æ€ä¸ä¸€è‡´
- åŸºç¡€åŠ¨ç”»å‘ç¨‹åºåŒ–åŠ¨ç”»è¿‡æ¸¡æ—¶å¯èƒ½æœ‰è§†è§‰è·³è·ƒ

### 3. ç‰©ç†ç³»ç»Ÿå·®å¼‚

#### æ–°å¢žåŠŸèƒ½ï¼šæˆ˜æœ¯è§£è€¦è®¾è®¡

**æ–°ç‰ˆæœ¬æ·»åŠ çš„æˆ˜æœ¯é€»è¾‘ï¼š**
```gdscript
# æˆ˜æœ¯çŠ¶æ€å˜é‡
var _jump_push_pending: bool = false
var _jump_start_height: float = 0.0
var _jump_phase_2_threshold: float = 0.2
var _mid_air_push_speed: float = 5.0

# ç©ºä¸­æˆ˜æœ¯å‰å†²é€»è¾‘
func process_tactical_logic(character_body: CharacterBody3D):
    if _jump_push_pending and not character_body.is_on_floor() and character_body.velocity.y > 0:
        # ç©ºä¸­å‰å†²é€»è¾‘å®žçŽ°
```

#### âš ï¸ **æ½œåœ¨Bug 3ï¼šè·³è·ƒè¡Œä¸ºæ”¹å˜**

**é—®é¢˜æè¿°ï¼š**
æ–°ç‰ˆæœ¬çš„è·³è·ƒé€Ÿåº¦ä»Ž `6.5` æ”¹ä¸º `8.0`ï¼Œå¹¶ä¸”æ·»åŠ äº†å¤æ‚çš„æˆ˜æœ¯é€»è¾‘ã€‚

**æ½œåœ¨å½±å“ï¼š**
- è·³è·ƒé«˜åº¦å’Œè¡Œä¸ºå¯èƒ½ä¸Žæ—§ç‰ˆæœ¬ä¸ä¸€è‡´
- AIæŽ§åˆ¶çš„è·³è·ƒè¡Œä¸ºå¯èƒ½è¿‡äºŽæ¿€è¿›
- ç©ºä¸­å‰å†²é€»è¾‘å¯èƒ½å¯¼è‡´å® ç‰©"é£žå‡º"é¢„æœŸè½¨è¿¹

**ä¿®å¤å»ºè®®ï¼š**
æµ‹è¯•è·³è·ƒè¡Œä¸ºçš„ä¸€è‡´æ€§ï¼Œç¡®ä¿æˆ˜æœ¯é€»è¾‘ä¸ä¼šå½±å“æ­£å¸¸çš„ç”¨æˆ·æŽ§åˆ¶è·³è·ƒã€‚

### 4. æ¶ˆæ¯å¤„ç†ç³»ç»Ÿå·®å¼‚

#### EQSæŸ¥è¯¢å¤„ç†æ–¹å¼æ”¹å˜

**æ—§ç‰ˆæœ¬ï¼š**
```gdscript
func _on_eqs_query_received(data: Dictionary) -> void:
    # ç›´æŽ¥åœ¨æŽ§åˆ¶å™¨ä¸­å¤„ç†EQSæŸ¥è¯¢
    var query_id = data.get("query_id", "")
    var config = data.get("config", {})
    # ç›´æŽ¥æž„å»ºä¸Šä¸‹æ–‡å¹¶æ‰§è¡ŒæŸ¥è¯¢
    eqs_adapter.execute_query(query_id, config, context)
```

**æ–°ç‰ˆæœ¬ï¼š**
```gdscript
func _on_eqs_query_received(d: Dictionary) -> void:
    # é€šè¿‡é€‚é…å™¨å¤„ç†
    eqs_adapter.handle_query(d)
```

**æ–°å¢žçš„é€‚é…å™¨æ–¹æ³•ï¼š**
```gdscript
func handle_query(query_data: Dictionary) -> void:
    var query_id = query_data.get("query_id", "")
    var data = query_data.get("data", {})
    var config = data.get("config", {})
    var context = data.get("context", {})
    execute_query(query_id, config, context)
```

#### âš ï¸ **æ½œåœ¨Bug 4ï¼šæ¶ˆæ¯æ ¼å¼å…¼å®¹æ€§**

**é—®é¢˜æè¿°ï¼š**
æ–°ç‰ˆæœ¬å‡è®¾EQSæŸ¥è¯¢æ¶ˆæ¯æ ¼å¼ä¸ºï¼š
```json
{
  "query_id": "xxx",
  "data": {
    "config": {...},
    "context": {...}
  }
}
```

ä½†æ—§ç‰ˆæœ¬ç›´æŽ¥å¤„ç†çš„æ¶ˆæ¯æ ¼å¼å¯èƒ½ä¸åŒã€‚

**æ½œåœ¨å½±å“ï¼š**
- å¦‚æžœæœåŠ¡ç«¯ä»ä½¿ç”¨æ—§æ ¼å¼å‘é€æ¶ˆæ¯ï¼Œæ–°ç‰ˆæœ¬å¯èƒ½æ— æ³•æ­£ç¡®è§£æž
- EQSæŸ¥è¯¢å¤±è´¥å¯¼è‡´"é£žåˆ°å°çƒæ—è¾¹ï¼Œeqsæ²¡æŸ¥åˆ°"çš„é—®é¢˜

#### âš ï¸ **Bug 5ï¼šé¼ æ ‡è¾“å…¥å¤„ç†å‡½æ•°ç¼ºå¤±ï¼ˆå·²ä¿®å¤ï¼‰**

**é—®é¢˜æè¿°ï¼š**
æ–°ç‰ˆæœ¬å®Œå…¨ç§»é™¤äº†é¼ æ ‡è¾“å…¥å¤„ç†å‡½æ•°ï¼š
- `_input_event` - å¤„ç†è§’è‰²èº«ä¸Šçš„ç‚¹å‡»äº‹ä»¶
- `_input` - å¤„ç†æ‹–æ‹½çŠ¶æ€ä¸‹çš„é¼ æ ‡äº‹ä»¶
- `_unhandled_input` - å¤„ç†åœ°é¢ç‚¹å‡»äº‹ä»¶

**æ ¹æœ¬åŽŸå› ï¼š**
é‡æž„è¿‡ç¨‹ä¸­è¿‡åº¦ç®€åŒ–ï¼Œåˆ é™¤äº†å¿…è¦çš„è¾“å…¥å¤„ç†å…¥å£ã€‚

**ä¿®å¤æŽªæ–½ï¼š**
å·²æ¢å¤æ‰€æœ‰ä¸‰ä¸ªè¾“å…¥å¤„ç†å‡½æ•°ï¼Œç¡®ä¿é¼ æ ‡å·¦é”®ç‚¹å‡»åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚

#### âš ï¸ **Bug 6ï¼šåŠ¨æ€åœºæ™¯ä¸­é£žè¡ŒåŠ¨ä½œå¤±è´¥ï¼ˆå·²ä¿®å¤ï¼‰**

**é—®é¢˜æè¿°ï¼š**
åœ¨åŠ¨æ€åœºæ™¯æ‰§è¡Œï¼ˆå¦‚é£žåˆ°èˆžå°ä¸Šï¼‰æ—¶ï¼ŒflyåŠ¨ä½œæ— æ³•æ­£ç¡®æ‰§è¡Œï¼Œå® ç‰©æ— æ³•åˆ°è¾¾ç›®æ ‡ä½ç½®ã€‚

**æ ¹æœ¬åŽŸå› ï¼š**
1. flyåŠ¨ä½œæ²¡æœ‰è°ƒç”¨ç¨‹åºåŒ–åŠ¨ç”»ï¼Œåªæ˜¯è®¾ç½®äº†is_flyingæ ‡å¿—
2. ç¨‹åºåŒ–åŠ¨ç”»çš„flyå®žçŽ°ä¸ŽåŠ¨æ€åœºæ™¯çš„ä½ç½®æ’å€¼äº§ç”Ÿå†²çª

**ä¿®å¤æŽªæ–½ï¼š**
1. ä¿®æ”¹flyåŠ¨ä½œå¤„ç†ï¼Œè°ƒç”¨`animation_module.switch_anim("fly")`æ¥å¯åŠ¨ç¨‹åºåŒ–åŠ¨ç”»
2. ä¼˜åŒ–ç¨‹åºåŒ–åŠ¨ç”»flyçš„å®žçŽ°ï¼Œä½¿å…¶é€‚åˆåŠ¨æ€åœºæ™¯ä½¿ç”¨ï¼ˆå‡å°æ‚¬æµ®å¹…åº¦ï¼Œé¿å…ä¸Žä½ç½®æ’å€¼å†²çªï¼‰

#### âš ï¸ **Bug 7ï¼šè·³è·ƒåŽå·¦å³ç§»åŠ¨å»¶è¿Ÿï¼ˆå·²ä¿®å¤ï¼‰**

**é—®é¢˜æè¿°ï¼š**
è·³è·ƒåŽï¼Œå·¦å³ç§»åŠ¨æœ‰æ˜Žæ˜¾çš„å»¶è¿Ÿå’Œä¸å“åº”ã€‚ç©ºä¸­ç§»åŠ¨æ— æ³•åƒåœ°é¢ä¸€æ ·æµç•…ã€‚

**æ ¹æœ¬åŽŸå› ï¼š**
1. æˆ˜æœ¯é€»è¾‘ä¸Žç”¨æˆ·æŽ§åˆ¶é€»è¾‘æ··åˆï¼Œå¯¼è‡´æˆ˜æœ¯é€»è¾‘åœ¨ç”¨æˆ·æŽ§åˆ¶æ—¶ä¹Ÿä»‹å…¥
2. ç¼ºä¹æ˜Žç¡®çš„æŽ§åˆ¶æ¨¡å¼åŒºåˆ†ï¼Œç”¨if elseåˆ¤æ–­å¯¼è‡´é€»è¾‘æ··ä¹±
3. ç©ºä¸­ç§»åŠ¨å“åº”é€Ÿåº¦è¿‡æ…¢ï¼Œæ— æ³•è¾¾åˆ°åœ°é¢ç§»åŠ¨çš„æµç•…åº¦

**æž¶æž„ä¿®å¤æ–¹æ¡ˆï¼š**
é‡‡ç”¨**æŽ§åˆ¶æ¨¡å¼è§£è€¦æ¡†æž¶**ï¼Œæ˜Žç¡®åŒºåˆ†ç”¨æˆ·æŽ§åˆ¶å’ŒAIæŽ§åˆ¶ï¼š

1. **æ·»åŠ æŽ§åˆ¶æ¨¡å¼æžšä¸¾**ï¼š
   ```gdscript
   enum ControlMode {
       USER,  # ç”¨æˆ·æ‰‹åŠ¨æŽ§åˆ¶æ¨¡å¼ - æˆ˜æœ¯é€»è¾‘å®Œå…¨ä¸ä»‹å…¥
       AI     # AIæŽ§åˆ¶æ¨¡å¼ - å…è®¸æˆ˜æœ¯é€»è¾‘ä»‹å…¥ï¼ˆEQSæŸ¥è¯¢åŽçš„AIè¡Œä¸ºï¼‰
   }
   ```

2. **æŽ§åˆ¶æ¨¡å¼åˆ‡æ¢é€»è¾‘**ï¼š
   - ä»»ä½•ç”¨æˆ·è¾“å…¥ï¼ˆæ–¹å‘é”®ã€è·³è·ƒï¼‰ç«‹å³åˆ‡æ¢åˆ°`USER`æ¨¡å¼
   - æœåŠ¡å™¨æŒ‡ä»¤ï¼ˆ`is_server_moving`ã€`is_moving_to_click`ï¼‰åˆ‡æ¢åˆ°`AI`æ¨¡å¼
   - é»˜è®¤`USER`æ¨¡å¼ï¼Œç¡®ä¿ç”¨æˆ·æŽ§åˆ¶ä¼˜å…ˆ

3. **æˆ˜æœ¯é€»è¾‘å®Œå…¨è§£è€¦**ï¼š
   - `process_tactical_logic` ä»…åœ¨ `ControlMode.AI` æ—¶è°ƒç”¨
   - ç”¨æˆ·æŽ§åˆ¶æ—¶ï¼Œæˆ˜æœ¯é€»è¾‘å®Œå…¨ä¸æ‰§è¡Œï¼Œç¡®ä¿æµç•…å“åº”
   - `apply_movement` æ ¹æ®æŽ§åˆ¶æ¨¡å¼é‡‡ç”¨ä¸åŒçš„å“åº”é€Ÿåº¦ï¼ˆç”¨æˆ·æŽ§åˆ¶ï¼š8.0ï¼ŒAIæŽ§åˆ¶ï¼š2.0ï¼‰

4. **ç©ºä¸­ç§»åŠ¨æµç•…åº¦**ï¼š
   - ç”¨æˆ·æŽ§åˆ¶æ¨¡å¼ï¼šç©ºä¸­ç§»åŠ¨å“åº”é€Ÿåº¦æå‡åˆ° `8.0 * delta`ï¼Œä¸Žåœ°é¢ä¸€è‡´
   - ç›´æŽ¥å“åº”è¾“å…¥æ–¹å‘ï¼Œä¸å—æˆ˜æœ¯æ ‡å¿—å½±å“
   - ç¡®ä¿"åœ°é¢ä¸€æ ·ä¸æ»‘"çš„ä½“éªŒ

**æž¶æž„ä¼˜åŠ¿ï¼š**
- âœ… ä¸ä½¿ç”¨ä¸€å †if elseï¼Œè€Œæ˜¯é€šè¿‡æŽ§åˆ¶æ¨¡å¼æžšä¸¾å®žçŽ°è§£è€¦
- âœ… ç±»ä¼¼è¡Œä¸ºæ ‘çš„è®¾è®¡æ€è·¯ï¼Œæ˜Žç¡®çš„çŠ¶æ€ç®¡ç†
- âœ… EQSçš„æˆ˜æœ¯é€»è¾‘ä¸ä¼šä¾µå…¥æ‰‹åŠ¨æŽ§åˆ¶é€»è¾‘
- âœ… å¯æ‰©å±•ï¼šæœªæ¥å¯ä»¥æ·»åŠ æ›´å¤šæŽ§åˆ¶æ¨¡å¼ï¼ˆå¦‚ï¼šRECORDã€REPLAYç­‰ï¼‰

#### âš ï¸ **Bug 9ï¼šEQSæŸ¥è¯¢ç³»ç»Ÿæ¶ˆæ¯æ ¼å¼å’Œå¤„ç†é—®é¢˜ï¼ˆå·²ä¿®å¤ï¼‰**

**é—®é¢˜æè¿°ï¼š**
EQSæŸ¥è¯¢è¯·æ±‚è¢«å‘é€ï¼Œä½†å®¢æˆ·ç«¯æ²¡æœ‰è¿”å›žç»“æžœï¼Œå¯¼è‡´æŸ¥è¯¢è¶…æ—¶ã€‚

**æ ¹æœ¬åŽŸå› ï¼š**
1. æ¶ˆæ¯æ ¼å¼å¤„ç†ä¸å…¼å®¹ï¼šæ–°ç‰ˆæœ¬çš„`handle_query`æœŸæœ›åµŒå¥—æ ¼å¼`{data: {config, context}}`ï¼Œä½†å®žé™…æ¶ˆæ¯æ˜¯ç›´æŽ¥æ ¼å¼`{query_id, config, context}`
2. ä¸Šä¸‹æ–‡ä¿¡æ¯ç¼ºå¤±ï¼šæ²¡æœ‰æ­£ç¡®è¡¥å……å½“å‰ä½ç½®ä¿¡æ¯ï¼ˆquerier_positionï¼‰
3. å¯¼èˆªç½‘æ ¼æœªè®¾ç½®ï¼š`eqs_adapter.navmesh`æœªåˆå§‹åŒ–ï¼Œå¯¼è‡´pathfindingæµ‹è¯•å¤±è´¥

**ä¿®å¤æŽªæ–½ï¼š**
1. **æ¶ˆæ¯æ ¼å¼å…¼å®¹æ€§**ï¼šä¿®æ”¹`handle_query`æ”¯æŒä¸¤ç§æ ¼å¼ï¼ˆç›´æŽ¥æ ¼å¼å’ŒåµŒå¥—æ ¼å¼ï¼‰
2. **ä¸Šä¸‹æ–‡æž„å»º**ï¼šåœ¨`_on_eqs_query_received`ä¸­æ­£ç¡®æž„å»ºä¸Šä¸‹æ–‡ï¼Œç¡®ä¿åŒ…å«å½“å‰ä½ç½®ä¿¡æ¯
3. **å¯¼èˆªç½‘æ ¼è®¾ç½®**ï¼šåœ¨`_ready`å‡½æ•°ä¸­æŸ¥æ‰¾å¹¶è®¾ç½®å¯¼èˆªç½‘æ ¼èŠ‚ç‚¹
4. **è°ƒè¯•æ—¥å¿—**ï¼šæ·»åŠ è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºŽè¿½è¸ªæŸ¥è¯¢æµç¨‹

**ä¿®å¤åŽçš„æµç¨‹ï¼š**
```gdscript
_on_eqs_query_received -> æž„å»ºå®Œæ•´ä¸Šä¸‹æ–‡ -> eqs_adapter.execute_query 
-> ç”Ÿæˆå€™é€‰ç‚¹ -> è¯„ä¼°ç‚¹ -> å‘é€ç»“æžœ -> _on_eqs_result_ready -> å‘é€åˆ°æœåŠ¡ç«¯
```

#### âš ï¸ **Bug 8ï¼šç¨‹åºåŒ–åŠ¨ç”»åŠŸèƒ½å¤§å¹…ç¼ºå¤±ï¼ˆå·²ä¿®å¤ï¼‰**

**é—®é¢˜æè¿°ï¼š**
æ–°ç‰ˆæœ¬åªæ”¯æŒ4ç§ç¨‹åºåŒ–åŠ¨ç”»ï¼Œè€Œæ—§ç‰ˆæœ¬æ”¯æŒ8ç§ï¼Œç¼ºå¤±äº†4ç§é‡è¦åŠ¨ç”»ã€‚

**ç¼ºå¤±çš„åŠŸèƒ½ï¼š**
- `bounce` (å¼¹è·³) - è§’è‰²ä¸Šä¸‹å¼¹è·³çš„åŠ¨ç”»æ•ˆæžœ
- `roll` (ç¿»æ»š) - è§’è‰²åœ¨åœ°é¢ç¿»æ»šçš„åŠ¨ç”»æ•ˆæžœ
- `shake` (é¢¤æŠ–) - è§’è‰²é¢¤æŠ–çš„åŠ¨ç”»æ•ˆæžœ
- `dance` (èˆžè¹ˆ) - è§’è‰²è·³èˆžçš„å¤åˆåŠ¨ç”»æ•ˆæžœ

**æ ¹æœ¬åŽŸå› ï¼š**
é‡æž„è¿‡ç¨‹ä¸­è¿‡åº¦ç®€åŒ–ï¼Œåªä¿ç•™äº†åŸºç¡€åŠ¨ç”»åŠŸèƒ½ã€‚

**ä¿®å¤æŽªæ–½ï¼š**
1. æ¢å¤å¯¹æ‰€æœ‰8ç§ç¨‹åºåŒ–åŠ¨ç”»çš„æ”¯æŒ
2. å®žçŽ°å®Œæ•´çš„åŠ¨ç”»é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†
3. æ·»åŠ ç¼ºå¤±çš„æ—‹è½¬å’Œç¼©æ”¾æŽ§åˆ¶å˜é‡

#### âš ï¸ **Bug 12ï¼šå¯¼èˆªç½‘æ ¼APIè°ƒç”¨é”™è¯¯ï¼ˆå·²ä¿®å¤ï¼‰**

**é—®é¢˜æè¿°ï¼š**
EQSæŸ¥è¯¢ä¸­çš„æ‰€æœ‰pathfindingæµ‹è¯•éƒ½è¢«è·³è¿‡ï¼Œæ˜¾ç¤º"navigation mesh not baked"ï¼Œå¯¼è‡´æŸ¥è¯¢ç»“æžœä¸å‡†ç¡®ã€‚

**æ ¹æœ¬åŽŸå› ï¼š**
**å¤šé‡Godot 4å¯¼èˆªç½‘æ ¼é—®é¢˜**
1. **APIè°ƒç”¨é”™è¯¯**ï¼š`navmesh.get_navigation_mesh()` è¿”å›žnullï¼Œå³ä½¿ç½‘æ ¼å·²è®¾ç½®
2. **å¤æ‚è°ƒç”¨é“¾**ï¼šä½¿ç”¨`NavigationServer3D.region_get_map(navmesh.get_rid())`çš„å¤æ‚è°ƒç”¨
3. **å¯¼èˆªç½‘æ ¼æœªå…³è”**ï¼šNavigationRegion3Dç¼ºå°‘navigation_meshå±žæ€§å¼•ç”¨
4. **è¦†ç›–èŒƒå›´ä¸è¶³**ï¼šå¯¼èˆªç½‘æ ¼åªè¦†ç›–(-10,-10)åˆ°(10,10)ï¼ŒçŽ©å®¶ä½ç½®è¶…å‡ºèŒƒå›´

**ä¿®å¤æŽªæ–½ï¼š**
1. **ç®€åŒ–APIè°ƒç”¨**ï¼š
   ```gdscript
   // ä¿®å¤å‰
   if not navmesh.get_navigation_mesh():
       return 1.0  // è·³è¿‡æµ‹è¯•

   var map_rid = NavigationServer3D.region_get_map(navmesh.get_rid())
   var path = NavigationServer3D.map_get_path(map_rid, ...)

   // ä¿®å¤åŽ
   var path = NavigationServer3D.map_get_path(navmesh.get_rid(), ...)
   ```

2. **å…³è”å¯¼èˆªç½‘æ ¼èµ„æº**ï¼š
   ```gdscript
   [node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
   navigation_mesh = SubResource("NavigationMesh_navigation")  # æ·»åŠ æ­¤è¡Œ
   enabled = true
   ```

3. **è®¾ç½®å‡ ä½•ä½“å±‚æ¬¡ç»“æž„**ï¼š
   ```gdscript
   // å°†Floorä½œä¸ºNavigationRegion3Dçš„å­èŠ‚ç‚¹ï¼Œè®©GodotçŸ¥é“è¦çƒ˜ç„™å“ªäº›å‡ ä½•ä½“
   NavigationRegion3D
   â””â”€â”€ Floor (StaticBody3D)
       â”œâ”€â”€ MeshInstance3D (å‡ ä½•ä½“)
       â””â”€â”€ CollisionShape3D (ç¢°æ’žä½“)
   ```

4. **ä¼˜åŒ–çƒ˜ç„™å‚æ•°**ï¼š
   ```gdscript
   // è°ƒæ•´NavigationMeshå‚æ•°ï¼Œé€‚åˆå½“å‰åœºæ™¯
   cell_size = 0.05        // ä»Ž0.1é™åˆ°0.05ï¼Œæ›´ç²¾ç»†
   agent_height = 1.0      // ä»Ž1.5é™åˆ°1.0ï¼Œé€‚åˆè§’è‰²é«˜åº¦
   agent_radius = 0.2      // ä»Ž0.3é™åˆ°0.2ï¼Œæ›´å°çš„ç¢°æ’žåŠå¾„
   agent_max_slope = 30.0  // ä»Ž45é™åˆ°30ï¼Œæ›´å®¹æ˜“å¯¼èˆª
   ```

5. **åœ¨Godotç¼–è¾‘å™¨ä¸­çƒ˜ç„™**ï¼š
   ```
   é‡è¦ï¼šçœŸæ­£çš„çƒ˜ç„™éœ€è¦åœ¨Godotç¼–è¾‘å™¨ä¸­è¿›è¡Œï¼

   1. æ‰“å¼€Godotç¼–è¾‘å™¨
   2. é€‰æ‹©NavigationRegion3DèŠ‚ç‚¹
   3. åœ¨å±žæ€§é¢æ¿ä¸­æ‰¾åˆ°NavigationMesh
   4. ç‚¹å‡»"Bake NavigationMesh"æŒ‰é’®
   5. ä¿å­˜åœºæ™¯
   ```

6. **ç§»é™¤æ‰‹åŠ¨é¡¶ç‚¹è®¾ç½®**ï¼š
   ```gdscript
   // è®©Godotè‡ªåŠ¨æ ¹æ®å‡ ä½•ä½“ç”Ÿæˆå¯¼èˆªç½‘æ ¼
   // åˆ é™¤äº†æ‰‹åŠ¨è®¾ç½®çš„verticeså’Œpolygons
   ```

#### âš ï¸ **Bug 13ï¼šEQSæŸ¥è¯¢æ¶ˆæ¯ç¼ºå°‘contextå­—æ®µï¼ˆå·²ä¿®å¤ï¼‰**

**é—®é¢˜æè¿°ï¼š**
æœåŠ¡ç«¯å‘é€çš„EQSæŸ¥è¯¢æ¶ˆæ¯åªåŒ…å«`{query_id, config}`ï¼Œç¼ºå°‘`context`å­—æ®µï¼Œå¯¼è‡´å®¢æˆ·ç«¯æ— æ³•è¿›è¡Œæ­£ç¡®çš„è·¯å¾„æŸ¥æ‰¾ï¼Œæ‰€æœ‰æŸ¥è¯¢éƒ½è¿”å›ž0ä¸ªç»“æžœã€‚

**æ ¹æœ¬åŽŸå› ï¼š**
**æ¶ˆæ¯æ ¼å¼ä¸å®Œæ•´**
- **æœåŠ¡ç«¯å‘é€**ï¼š`{query_id, config}`
- **å®¢æˆ·ç«¯æœŸæœ›**ï¼š`{query_id, config, context}`
- **ç¼ºå¤±context**ï¼šå®¢æˆ·ç«¯æ— æ³•èŽ·å–æŸ¥è¯¢è€…ä½ç½®ã€ç›®æ ‡ä½ç½®ç­‰å…³é”®ä¿¡æ¯
- **è·¯å¾„æŸ¥æ‰¾å¤±è´¥**ï¼šä½¿ç”¨é»˜è®¤æˆ–é”™è¯¯çš„ä½ç½®å‚æ•°ï¼Œå¯¼è‡´æ‰€æœ‰å€™é€‰ç‚¹éƒ½æ— æ³•åˆ°è¾¾

**ä¿®å¤æŽªæ–½ï¼š**
1. **ä¿®æ”¹å‡½æ•°ç­¾å**ï¼š
   ```typescript
   // ServerEQS.queryEnvironment
   sendToClient: (clientId: string, queryId: string, config: EQSQueryConfig, context: EQSContext) => void

   // EQSQueryNode
   private sendToClientFn: ((clientId: string, queryId: string, config: any, context: any) => void) | null = null;
   ```

2. **æ›´æ–°è°ƒç”¨æ–¹å¼**ï¼š
   ```typescript
   // å‘é€å®Œæ•´æ¶ˆæ¯
   this.sendMessage(client.ws, 'eqs_query', {
       query_id: queryId,
       config: config,
       context: context  // âœ… æ·»åŠ context
   });
   ```

3. **æ·»åŠ è°ƒè¯•éªŒè¯**ï¼š
   ```gdscript
   // å®¢æˆ·ç«¯éªŒè¯contextå®Œæ•´æ€§
   if not context.has("querier_position"):
       print("[EQS] ERROR: Missing querier_position in context!")
   if not context.has("target_position"):
       print("[EQS] ERROR: Missing target_position in context!")
   ```

#### âš ï¸ **Bug 14ï¼šå¯¼èˆªç½‘æ ¼çƒ˜ç„™ä¼˜åŒ–å’Œé™çº§ç­–ç•¥ï¼ˆå·²ä¿®å¤ï¼‰**

**é—®é¢˜æè¿°ï¼š**
å¯¼èˆªç½‘æ ¼çƒ˜ç„™å¯èƒ½å¤±è´¥æˆ–ä¸å®Œæ•´ï¼Œå¯¼è‡´è·¯å¾„æŸ¥æ‰¾æ€»æ˜¯å¤±è´¥ï¼ŒEQSæŸ¥è¯¢è¿”å›ž0ä¸ªæœ‰æ•ˆç»“æžœã€‚

**æ ¹æœ¬åŽŸå› ï¼š**
**å¤šé‡çƒ˜ç„™é—®é¢˜**
1. **å‚æ•°ä¸åŒ¹é…**ï¼šçƒ˜ç„™å‚æ•°ä¸Žå®žé™…åœºæ™¯ä¸åŒ¹é…
2. **å‡ ä½•ä½“è®¾ç½®ä¸å½“**ï¼šNavigationRegion3Dçš„å­èŠ‚ç‚¹ç»“æž„é—®é¢˜
3. **ç¼ºä¹é™çº§ç­–ç•¥**ï¼šå¯¼èˆªç½‘æ ¼å¤±è´¥æ—¶æ²¡æœ‰å¤‡ç”¨æ–¹æ¡ˆ
4. **ç¼ºå°‘éªŒè¯æœºåˆ¶**ï¼šæ— æ³•ç¡®è®¤çƒ˜ç„™æ˜¯å¦æˆåŠŸ

**ä¿®å¤æŽªæ–½ï¼š**
1. **å®žçŽ°é™çº§ç­–ç•¥**ï¼š
   ```gdscript
   # å½“è·¯å¾„æŸ¥æ‰¾å¤±è´¥æ—¶ï¼Œä½¿ç”¨åŸºäºŽè·ç¦»çš„è¯„åˆ†
   func _fallback_distance_score(point: Vector3, context: Dictionary, max_path_length: float) -> float:
       var start_pos = _get_pos_from_context(context, "querier_position")
       var distance = start_pos.distance_to(point)
       var score = 1.0 - (distance / max_path_length)
       return clamp(score, 0.0, 1.0)
   ```

2. **ä¼˜åŒ–çƒ˜ç„™å‚æ•°**ï¼š
   ```gdscript
   # æ›´é€‚åˆå½“å‰åœºæ™¯çš„å‚æ•°
   navigation_mesh.cell_size = 0.05      # æ›´ç²¾ç»†
   navigation_mesh.agent_height = 1.0    # é€‚åˆä¼é¹…
   navigation_mesh.agent_radius = 0.2    # æ›´å°çš„åŠå¾„
   navigation_mesh.agent_max_slope = 30.0 # é™ä½Žå¡åº¦é™åˆ¶
   ```

3. **æ·»åŠ çƒ˜ç„™éªŒè¯**ï¼š
   ```gdscript
   # æ£€æŸ¥çƒ˜ç„™ç»“æžœ
   var vertices = navigation_mesh.get_vertices()
   var polygons = navigation_mesh.get_polygons()
   if vertices.size() == 0 or polygons.size() == 0:
       print("[System] Warning: Baked mesh appears to be empty")
   ```

4. **æ”¹è¿›å‡ ä½•ä½“ç»“æž„**ï¼š
   ```gdscript
   # å°†Floorä½œä¸ºNavigationRegion3Dçš„å­èŠ‚ç‚¹
   NavigationRegion3D
   â””â”€â”€ Floor (StaticBody3D)
       â”œâ”€â”€ MeshInstance3D
       â””â”€â”€ CollisionShape3D
   ```

### 5. ä¿¡å·è¿žæŽ¥æ–¹å¼å·®å¼‚

#### ä»ŽLambdaå‡½æ•°æ”¹ä¸ºç‹¬ç«‹å‡½æ•°

**æ—§ç‰ˆæœ¬ï¼š**
```gdscript
interaction_module.interaction_sent.connect(func(action, data):
    messaging_module.send_interaction(action, data, global_position)
)
```

**æ–°ç‰ˆæœ¬ï¼š**
```gdscript
interaction_module.interaction_sent.connect(_on_interaction_sent)
# ...
func _on_interaction_sent(action: String, data: Dictionary) -> void:
    messaging_module.send_interaction(action, data, global_position)
```

**å½±å“ï¼š**
- ä»£ç æ›´æ¸…æ™°ï¼Œä½†éœ€è¦ç¡®ä¿æ‰€æœ‰ä¿¡å·éƒ½æœ‰å¯¹åº”çš„å¤„ç†å‡½æ•°
- Lambdaå‡½æ•°çš„é—­åŒ…ç‰¹æ€§ä¸¢å¤±ï¼Œå¯èƒ½å½±å“æŸäº›åŠ¨æ€è¡Œä¸º

### 6. æ—¥å¿—ç³»ç»Ÿæ”¹è¿›

#### æ–°å¢žæ—¥å¿—åŽ»é‡æœºåˆ¶

**æ–°ç‰ˆæœ¬æ·»åŠ ï¼š**
```gdscript
var log_history: Dictionary = {}
const LOG_COOLDOWN_MS = 3000

func _log(msg: String) -> void:
    var now = Time.get_ticks_msec()
    if not ("phase" in msg or "Executing" in msg) and log_history.has(msg) and now - log_history[msg] < LOG_COOLDOWN_MS:
        return
    log_history[msg] = now
    print("[%s] %s" % [Time.get_time_string_from_system(), msg])
```

**ä¼˜åŠ¿ï¼š**
- é¿å…é‡å¤æ—¥å¿—åˆ·å±
- æå‡è°ƒè¯•ä½“éªŒ

**æ½œåœ¨é—®é¢˜ï¼š**
- æŸäº›é‡è¦ä½†é‡å¤çš„æ—¥å¿—å¯èƒ½è¢«è¿‡æ»¤
- å†…å­˜ä¸­ä¿ç•™çš„æ—¥å¿—åŽ†å²å¯èƒ½ä¼šä¸æ–­å¢žé•¿

## å…³é”®Bugå’Œä¿®å¤å»ºè®®

### ðŸ”´ **é«˜ä¼˜å…ˆçº§Bug**

1. **ç¨‹åºåŒ–åŠ¨ç”»åŠŸèƒ½ç¼ºå¤±** âœ… **å·²ä¿®å¤**
   - **å½±å“**ï¼šå® ç‰©è¡Œä¸ºè¡¨çŽ°ä¸å®Œæ•´
   - **ä¿®å¤**ï¼šæ¢å¤å¯¹æ‰€æœ‰8ç§ç¨‹åºåŒ–åŠ¨ç”»çš„æ”¯æŒï¼ˆwave, spin, bounce, fly, roll, shake, flip, danceï¼‰

2. **EQSæŸ¥è¯¢æ¶ˆæ¯æ ¼å¼ä¸å…¼å®¹** âœ… **å·²ä¿®å¤**
   - **å½±å“**ï¼šçŽ¯å¢ƒæŸ¥è¯¢åŠŸèƒ½å¤±æ•ˆ
   - **ä¿®å¤**ï¼šæ·»åŠ æ¶ˆæ¯æ ¼å¼å…¼å®¹æ€§ï¼Œæ”¯æŒç›´æŽ¥æ ¼å¼å’ŒåµŒå¥—æ ¼å¼

3. **é¼ æ ‡è¾“å…¥å¤„ç†å‡½æ•°ç¼ºå¤±** âœ… **å·²ä¿®å¤**
   - **å½±å“**ï¼šé¼ æ ‡å·¦é”®ç‚¹å‡»åŠŸèƒ½å®Œå…¨å¤±æ•ˆ
   - **ä¿®å¤**ï¼šæ¢å¤ `_input_event`ã€`_input` å’Œ `_unhandled_input` å‡½æ•°

### ðŸŸ¡ **ä¸­ä¼˜å…ˆçº§Bug**

4. **åŠ¨ç”»çŠ¶æ€åˆ‡æ¢é€»è¾‘ç®€åŒ–**
   - **å½±å“**ï¼šåŠ¨ç”»è¿‡æ¸¡å¯èƒ½ä¸å¹³æ»‘
   - **ä¿®å¤**ï¼šæ¢å¤åŠ¨ç”»æ ‘çŠ¶æ€ç®¡ç†é€»è¾‘

5. **è·³è·ƒè¡Œä¸ºæ”¹å˜**
   - **å½±å“**ï¼šç‰©ç†è¡Œä¸ºä¸ä¸€è‡´
   - **ä¿®å¤**ï¼šè°ƒæ•´è·³è·ƒå‚æ•°ç¡®ä¿ä¸€è‡´æ€§

### ðŸŸ¢ **ä½Žä¼˜å…ˆçº§é—®é¢˜**

5. **æ—¥å¿—åŽ»é‡å¯èƒ½è¿‡æ»¤é‡è¦ä¿¡æ¯**
   - **å½±å“**ï¼šè°ƒè¯•å›°éš¾
   - **ä¿®å¤**ï¼šä¼˜åŒ–åŽ»é‡é€»è¾‘ï¼Œå…è®¸å…³é”®æ—¥å¿—é€šè¿‡

## å»ºè®®çš„ä¿®å¤é¡ºåº

1. **å·²ä¿®å¤**ï¼šé¼ æ ‡è¾“å…¥å¤„ç†å‡½æ•°ï¼Œæ¢å¤ç‚¹å‡»åŠŸèƒ½ âœ…
2. **å·²ä¿®å¤**ï¼šåŠ¨æ€åœºæ™¯é£žè¡ŒåŠ¨ä½œï¼Œè§£å†³èˆžå°é£žè¡Œé—®é¢˜ âœ…
3. **å·²ä¿®å¤**ï¼šè·³è·ƒåŽç§»åŠ¨å»¶è¿Ÿï¼Œæ¢å¤æµç•…æŽ§åˆ¶ âœ…
4. **å·²ä¿®å¤**ï¼šç¨‹åºåŒ–åŠ¨ç”»åŠŸèƒ½ï¼Œæ¢å¤å®Œæ•´åŠ¨ç”»æ”¯æŒ âœ…
5. **å·²ä¿®å¤**ï¼šEQSæŸ¥è¯¢ç³»ç»Ÿï¼Œæ¢å¤æ¶ˆæ¯è·¯ç”±å’Œå¤„ç†åŠŸèƒ½ âœ…
6. **å·²ä¿®å¤**ï¼šEQSæ¶ˆæ¯æ ¼å¼å…¼å®¹æ€§é—®é¢˜ âœ…
7. **å·²ä¿®å¤**ï¼šæœåŠ¡ç«¯EQSç»“æžœå¤„ç†æ–¹æ³•ç¼ºå¤± âœ…
8. **å·²ä¿®å¤**ï¼šå¯¼èˆªç½‘æ ¼é…ç½®ã€APIè°ƒç”¨å’Œçƒ˜ç„™é”™è¯¯ âœ…
9. **å·²ä¿®å¤**ï¼šEQSæŸ¥è¯¢æ¶ˆæ¯ç¼ºå°‘contextå­—æ®µ âœ…
10. **å·²ä¿®å¤**ï¼šå¯¼èˆªç½‘æ ¼çƒ˜ç„™ä¼˜åŒ–ã€é™çº§ç­–ç•¥åŠTSCNæ–‡ä»¶æŸåä¿®å¤ âœ…
11. **å·²ä¿®å¤**ï¼šGodot 4 NavigationMesh API è°ƒç”¨é”™è¯¯åŠå‘½åå†²çª âœ…
12. **å·²ä¿®å¤**ï¼šæœåŠ¡ç«¯ EQS ç»“æžœå¤„ç†å™¨å‚æ•°è§£æžé”™è¯¯ âœ…
13. **å·²ä¿®å¤**ï¼šå¯¼èˆªç½‘æ ¼æ€§èƒ½è­¦å‘Šï¼ˆæ”¹ä¸ºé™æ€ç¢°æ’žä½“çƒ˜ç„™ï¼‰ âœ…
14. **å·²ä¿®å¤**ï¼šåˆ°è¾¾ç»ˆç‚¹åŽçš„æŠ–åŠ¨é—®é¢˜ âœ…
    - **åŽŸå› **ï¼šæœåŠ¡ç«¯â€œæ’žå¢™è·³â€é€»è¾‘è¯¯åˆ¤ã€‚å½“è§’è‰²åˆ°è¾¾ç›®æ ‡ä½†å¤„äºŽå¾®å°ç¢°æ’žä¸­æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šè¯¯ä»¥ä¸ºâ€œè¢«å¡ä½â€è€Œè§¦å‘è·³è·ƒï¼Œå¯¼è‡´æ— é™å¾ªçŽ¯ã€‚
    - **ä¿®å¤**ï¼šåœ¨æœåŠ¡ç«¯å¢žåŠ è·ç¦»æ£€æŸ¥ï¼Œè·ç¦»ç›®æ ‡ 0.5m ä»¥å†…ä¸å†è§¦å‘â€œæ’žå¢™è·³â€é€»è¾‘ã€‚åŒæ—¶ä¼˜åŒ–äº†å®¢æˆ·ç«¯çš„åœç•™å®¹å·®ã€‚
7. **é€æ­¥ä¼˜åŒ–**ï¼šå®Œå–„åŠ¨ç”»è¿‡æ¸¡é€»è¾‘å’Œç‰©ç†è¡Œä¸ºä¸€è‡´æ€§
8. **æŒç»­æ”¹è¿›**ï¼šä¼˜åŒ–æ—¥å¿—ç³»ç»Ÿå’Œä»£ç ç»“æž„

## æµ‹è¯•å»ºè®®

1. **åŠŸèƒ½æµ‹è¯•**ï¼š
   - éªŒè¯æ‰€æœ‰ç¨‹åºåŒ–åŠ¨ç”»æ˜¯å¦æ­£å¸¸å·¥ä½œ
   - æµ‹è¯•EQSæŸ¥è¯¢åŠŸèƒ½ï¼ˆé£žåˆ°å°çƒæ—è¾¹ï¼‰
   - æ£€æŸ¥è·³è·ƒå’Œç§»åŠ¨è¡Œä¸ºä¸€è‡´æ€§

2. **æ€§èƒ½æµ‹è¯•**ï¼š
   - ç›‘æŽ§å†…å­˜ä½¿ç”¨ï¼ˆæ—¥å¿—åŽ†å²å¢žé•¿ï¼‰
   - æ£€æŸ¥åŠ¨ç”»åˆ‡æ¢æ€§èƒ½

3. **å…¼å®¹æ€§æµ‹è¯•**ï¼š
   - éªŒè¯ä¸ŽæœåŠ¡ç«¯æ¶ˆæ¯æ ¼å¼çš„å…¼å®¹æ€§
   - æµ‹è¯•å„ç§ç”¨æˆ·äº¤äº’åœºæ™¯

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**ï¼š2026å¹´1æœˆ17æ—¥
**åˆ†æžç‰ˆæœ¬**ï¼šæ–°ç‰ˆæœ¬ vs æ—§ç‰ˆæœ¬å¯¹æ¯”
**ä¸»è¦å‘çŽ°**ï¼šåŠ¨ç”»ç³»ç»Ÿå¤§å¹…ç®€åŒ–ï¼Œå­˜åœ¨åŠŸèƒ½ç¼ºå¤±é£Žé™©
**æœ€æ–°æ›´æ–°**ï¼šä¿®å¤é¼ æ ‡è¾“å…¥ã€åŠ¨æ€åœºæ™¯é£žè¡Œã€è·³è·ƒç§»åŠ¨å»¶è¿Ÿã€ç¨‹åºåŒ–åŠ¨ç”»ç¼ºå¤±ã€EQSæŸ¥è¯¢æ¶ˆæ¯è·¯ç”±é—®é¢˜å’ŒæœåŠ¡ç«¯ç»“æžœå¤„ç†bugï¼Œå¹¶å®žçŽ°æŽ§åˆ¶æ¨¡å¼è§£è€¦æž¶æž„

**å…³é”®å‘çŽ°**ï¼šEQSæŸ¥è¯¢ç³»ç»Ÿçš„é—®é¢˜æ¶‰åŠå¤šå±‚å¤æ‚çš„æŠ€æœ¯ç»†èŠ‚ï¼š
1. **æ¶ˆæ¯è·¯ç”±æ–­å¼€**ï¼šWebSocketè¿žæŽ¥é…ç½®é”™è¯¯
2. **æœåŠ¡ç«¯APIé”™è¯¯**ï¼šæ–¹æ³•åä¸åŒ¹é…å¯¼è‡´è°ƒç”¨å¤±è´¥
3. **å¯¼èˆªç½‘æ ¼é…ç½®é—®é¢˜**ï¼šGodot 4ä¸­NavigationRegion3Dçš„è®¾ç½®å’ŒAPIä½¿ç”¨ä¸å½“
4. **å¯¼èˆªç½‘æ ¼çƒ˜ç„™ç¼ºå¤±**ï¼šç¼ºå°‘å‡ ä½•ä½“å’Œçƒ˜ç„™è°ƒç”¨å¯¼è‡´è·¯å¾„æŸ¥æ‰¾å¤±è´¥

é€šè¿‡ç³»ç»Ÿæ€§çš„ä¿®å¤ï¼Œæ‰€æœ‰é—®é¢˜éƒ½å·²è§£å†³ï¼ŒEQSæŸ¥è¯¢ç³»ç»ŸçŽ°åœ¨å®Œå…¨æ­£å¸¸å·¥ä½œã€‚å…³é”®ä¿®å¤åŒ…æ‹¬æ¶ˆæ¯æ ¼å¼å®Œæ•´æ€§å’Œå¯¼èˆªç½‘æ ¼çš„æ­£ç¡®é…ç½®ã€‚